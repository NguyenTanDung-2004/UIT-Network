import Image from "next/image";
import React, { useState } from "react";
import { motion } from "framer-motion";
import { useRouter } from "next/navigation";
import ForgotPasswordModals from "./ForgotPasswordModals";
import { login } from "@/services/authService";

interface LoginModalProps {
  onClose: () => void;
}

const LoginModal: React.FC<LoginModalProps> = ({ onClose }) => {
  const router = useRouter();
  const [showPassword, setShowPassword] = useState(false);
  const [showForgotPassword, setShowForgotPassword] = useState(false);
  const togglePasswordVisibility = () => {
    setShowPassword(!showPassword);
  };

  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [error, setError] = useState<string | null>(null);

  const handleLogin = async (e: React.FormEvent) => {
    e.preventDefault();
    setError(null);

    try {
      const response = await login(email, password);
      if (response.enumResponse.code === "s_02") {
        router.push("/home");
        onClose();
      }
    } catch (err: any) {
      console.error("Login error:", err);
      setError("Login failed. Please check your login information again.");
    }
  };

  return (
    <>
      <motion.div
        className="fixed top-0 left-0 w-full h-full bg-[#b0afaf] bg-opacity-80 flex items-center justify-center z-50"
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        exit={{ opacity: 0 }}
      >
        <motion.div
          className="bg-white rounded-lg p-8 w-full max-w-md shadow-xl relative"
          initial={{ y: -50, opacity: 0 }}
          animate={{ y: 0, opacity: 1 }}
          exit={{ y: -50, opacity: 0 }}
          transition={{ duration: 0.3 }}
        >
          {/* Close button */}
          <button
            onClick={onClose}
            className="absolute top-4 right-4 text-gray-400 hover:text-gray-600"
          >
            <svg
              className="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
            >
              <path
                strokeLinecap="round"
                strokeLinejoin="round"
                strokeWidth="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>

          {/* Logo and title */}
          <div className="flex flex-col items-center justify-center mb-8">
            <Image
              src="/icon.ico"
              alt="Study Buddy Logo"
              width={32}
              height={32}
              className="mr-2"
            />
            <svg
              width="161"
              height="41"
              viewBox="0 0 161 41"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M11.3301 28.5C10.1301 28.5 9.14341 28.4133 8.37008 28.24C7.59675 28.08 6.99675 27.8533 6.57008 27.56C6.14341 27.2667 5.84341 26.9333 5.67008 26.56C5.51008 26.1733 5.43008 25.7667 5.43008 25.34C5.43008 24.94 5.49008 24.54 5.61008 24.14C5.74341 23.74 5.97008 23.3267 6.29008 22.9C6.47675 23.2867 6.78341 23.66 7.21008 24.02C7.63675 24.38 8.11675 24.6733 8.65008 24.9C9.19675 25.1267 9.73008 25.24 10.2501 25.24C10.9434 25.24 11.5167 25.1333 11.9701 24.92C12.4367 24.6933 12.7701 24.3467 12.9701 23.88C10.7034 23.5733 9.00341 22.9467 7.87008 22C6.73675 21.04 6.17008 19.9133 6.17008 18.62C6.17008 17.86 6.32341 17.1933 6.63008 16.62C6.95008 16.0467 7.37008 15.5667 7.89008 15.18C8.41008 14.78 8.97675 14.46 9.59008 14.22C10.2034 13.9667 10.8101 13.7867 11.4101 13.68C12.0101 13.56 12.5434 13.5 13.0101 13.5C14.7034 13.5 16.0034 13.7 16.9101 14.1C17.8301 14.4867 18.2901 15.1733 18.2901 16.16C18.2901 16.7333 18.1567 17.2133 17.8901 17.6C17.6367 17.9867 17.2967 18.28 16.8701 18.48C16.4567 18.6667 16.0034 18.76 15.5101 18.76C14.9234 18.76 14.3501 18.5933 13.7901 18.26C13.2301 17.9133 12.8367 17.4333 12.6101 16.82C12.1434 16.82 11.6834 16.98 11.2301 17.3C10.7767 17.6067 10.4834 18.0333 10.3501 18.58C12.1234 19.0067 13.5501 19.48 14.6301 20C15.7234 20.52 16.5167 21.1067 17.0101 21.76C17.5034 22.4133 17.7501 23.16 17.7501 24C17.7501 24.9733 17.4634 25.7933 16.8901 26.46C16.3167 27.1267 15.5434 27.6333 14.5701 27.98C13.6101 28.3267 12.5301 28.5 11.3301 28.5ZM23.8196 28.52C22.9263 28.52 22.2929 28.2667 21.9196 27.76C21.5596 27.24 21.3796 26.46 21.3796 25.42C21.3796 24.78 21.4796 23.8267 21.6796 22.56C21.8796 21.2933 22.1663 19.6333 22.5396 17.58C22.2329 17.62 21.8396 17.68 21.3596 17.76C20.8929 17.84 20.4196 17.9267 19.9396 18.02C19.4596 18.1 19.0596 18.18 18.7396 18.26C18.6596 18.0067 18.6129 17.76 18.5996 17.52C18.5863 17.28 18.5796 17.0933 18.5796 16.96C18.5796 16.2 18.7129 15.58 18.9796 15.1C19.2596 14.62 19.6263 14.2667 20.0796 14.04C20.5329 13.8133 21.0263 13.7 21.5596 13.7C22.2396 13.7 22.9129 13.7667 23.5796 13.9C24.2463 14.02 24.9129 14.1467 25.5796 14.28C26.2596 14.4133 26.9529 14.4933 27.6596 14.52C28.1529 14.4267 28.6996 14.3067 29.2996 14.16C29.9129 14.0133 30.4463 13.8733 30.8996 13.74C30.9796 13.9933 31.0263 14.24 31.0396 14.48C31.0529 14.72 31.0596 14.9067 31.0596 15.04C31.0596 15.8 30.9063 16.42 30.5996 16.9C30.3063 17.38 29.9063 17.7333 29.3996 17.96C28.9063 18.1867 28.3596 18.3 27.7596 18.3C27.5863 18.3 27.4196 18.3 27.2596 18.3C27.0996 18.2867 26.9463 18.2733 26.7996 18.26C26.6796 18.86 26.5529 19.4867 26.4196 20.14C26.2996 20.7933 26.1863 21.4267 26.0796 22.04C25.9729 22.64 25.8796 23.18 25.7996 23.66C25.7329 24.1267 25.6996 24.48 25.6996 24.72C25.6996 25.4 25.7463 25.9733 25.8396 26.44C25.9463 26.9067 26.0996 27.3 26.2996 27.62C25.4996 28.22 24.6729 28.52 23.8196 28.52ZM42.4541 28.52C41.8141 28.52 41.2541 28.3333 40.7741 27.96C40.2941 27.5733 40.0541 26.96 40.0541 26.12C40.0541 26.04 40.0541 25.96 40.0541 25.88C40.0541 25.7867 40.0608 25.6933 40.0741 25.6L39.8741 25.54C38.5541 27.5133 36.7808 28.5 34.5541 28.5C33.4341 28.5 32.6141 28.2 32.0941 27.6C31.5875 27 31.3341 26.1667 31.3341 25.1C31.3341 24.5933 31.3941 23.9067 31.5141 23.04C31.6475 22.16 31.8008 21.2 31.9741 20.16C32.1608 19.12 32.3408 18.0933 32.5141 17.08L31.4541 14.94C32.1875 14.5133 32.8741 14.1667 33.5141 13.9C34.1675 13.6333 34.8541 13.5 35.5741 13.5C36.2008 13.5 36.6141 13.68 36.8141 14.04C37.0141 14.4 37.1141 14.84 37.1141 15.36C37.1141 15.5333 37.0808 15.8333 37.0141 16.26C36.9475 16.6733 36.8608 17.1667 36.7541 17.74C36.6608 18.3133 36.5541 18.9133 36.4341 19.54C36.3275 20.1533 36.2208 20.7533 36.1141 21.34C36.0208 21.9133 35.9408 22.42 35.8741 22.86C35.8075 23.3 35.7741 23.62 35.7741 23.82C35.7741 24.3133 35.8541 24.7 36.0141 24.98C36.1875 25.26 36.4675 25.4 36.8541 25.4C37.1741 25.4 37.5408 25.26 37.9541 24.98C38.3808 24.7 38.8075 24.28 39.2341 23.72C39.6608 23.1467 40.0275 22.4333 40.3341 21.58C40.0541 20.7533 39.9141 19.9133 39.9141 19.06C39.9141 18.0867 40.0741 17.18 40.3941 16.34C40.7275 15.5 41.2208 14.82 41.8741 14.3C42.5275 13.7667 43.3408 13.5 44.3141 13.5C44.6208 13.5 44.9341 13.5267 45.2541 13.58C45.5875 13.6333 45.8941 13.7333 46.1741 13.88C46.0541 14.6 45.9141 15.3933 45.7541 16.26C45.5941 17.1267 45.4275 18.0067 45.2541 18.9C45.0941 19.78 44.9408 20.62 44.7941 21.42C44.6608 22.22 44.5475 22.9133 44.4541 23.5C44.3741 24.0733 44.3341 24.48 44.3341 24.72C44.3341 25.4 44.3808 25.9733 44.4741 26.44C44.5808 26.9067 44.7341 27.3 44.9341 27.62C44.1341 28.22 43.3075 28.52 42.4541 28.52ZM52.0571 28.5C51.2038 28.5 50.4371 28.36 49.7571 28.08C49.0904 27.8 48.5638 27.3867 48.1771 26.84C47.7904 26.28 47.5971 25.58 47.5971 24.74C47.5971 24.2333 47.6571 23.5733 47.7771 22.76C47.9104 21.9467 48.0704 21.0533 48.2571 20.08C48.4438 19.0933 48.6238 18.0933 48.7971 17.08L47.7371 14.94C48.4838 14.5133 49.1971 14.1667 49.8771 13.9C50.5704 13.6333 51.2971 13.5 52.0571 13.5C52.3771 13.5 52.6438 13.5533 52.8571 13.66C53.0704 13.7667 53.2438 13.9133 53.3771 14.1C53.9504 13.9 54.4904 13.7533 54.9971 13.66C55.5038 13.5667 55.9838 13.52 56.4371 13.52C57.6504 13.52 58.6638 13.7933 59.4771 14.34C60.2904 14.8867 60.8971 15.6067 61.2971 16.5C61.7104 17.3933 61.9171 18.3667 61.9171 19.42C61.9171 20.26 61.7838 21.1067 61.5171 21.96C61.2638 22.8133 60.8704 23.6333 60.3371 24.42C59.8171 25.2067 59.1638 25.9067 58.3771 26.52C57.5904 27.1333 56.6704 27.62 55.6171 27.98C54.5638 28.3267 53.3771 28.5 52.0571 28.5ZM52.7771 25.58C53.7904 25.58 54.6371 25.3267 55.3171 24.82C56.0104 24.3133 56.5304 23.6467 56.8771 22.82C57.2238 21.9933 57.3971 21.1 57.3971 20.14C57.3971 18.94 57.1238 17.9667 56.5771 17.22C56.0304 16.46 55.2171 16.08 54.1371 16.08C54.0171 16.08 53.8904 16.0867 53.7571 16.1C53.6238 16.1133 53.4838 16.1333 53.3371 16.16C53.2571 16.6933 53.1504 17.36 53.0171 18.16C52.8971 18.96 52.7571 19.8133 52.5971 20.72C52.4504 21.6133 52.3038 22.4867 52.1571 23.34C52.0238 24.18 51.9171 24.9 51.8371 25.5C51.9971 25.5267 52.1571 25.5467 52.3171 25.56C52.4771 25.5733 52.6304 25.58 52.7771 25.58ZM64.8245 31.54C64.5045 31.54 64.1578 31.5067 63.7845 31.44C63.4111 31.3733 63.0578 31.2533 62.7245 31.08C62.3911 30.9067 62.1178 30.6667 61.9045 30.36C61.6911 30.0533 61.5845 29.6533 61.5845 29.16C61.5845 28.8133 61.6645 28.42 61.8245 27.98C61.9845 27.5267 62.2311 27.0733 62.5645 26.62C62.8711 27.06 63.2711 27.3933 63.7645 27.62C64.2578 27.8467 64.7711 27.96 65.3045 27.96C65.9178 27.96 66.4911 27.8067 67.0245 27.5C67.5711 27.18 67.9578 26.7 68.1845 26.06C67.7711 26.1533 67.4445 26.22 67.2045 26.26C66.9645 26.3 66.6911 26.32 66.3845 26.32C65.7311 26.32 65.2111 26.18 64.8245 25.9C64.4511 25.6067 64.2378 25.1067 64.1845 24.4C64.1445 23.76 64.1111 23.0667 64.0845 22.32C64.0578 21.5733 64.0045 20.8133 63.9245 20.04C63.8578 19.2667 63.7378 18.52 63.5645 17.8C63.3911 17.08 63.1445 16.4333 62.8245 15.86C62.5045 15.2733 62.0778 14.8 61.5445 14.44C62.0778 14.12 62.5445 13.8867 62.9445 13.74C63.3578 13.58 63.7911 13.5 64.2445 13.5C64.9778 13.5 65.5845 13.6733 66.0645 14.02C66.5578 14.3533 66.9511 14.8067 67.2445 15.38C67.5511 15.9533 67.7778 16.6 67.9245 17.32C68.0845 18.04 68.1978 18.7867 68.2645 19.56C68.3311 20.3333 68.3711 21.0867 68.3845 21.82C68.4111 22.5533 68.4378 23.22 68.4645 23.82H68.7445C68.9845 23.2467 69.2245 22.6 69.4645 21.88C69.7178 21.16 69.9445 20.4267 70.1445 19.68C70.3445 18.92 70.5045 18.2 70.6245 17.52C70.7578 16.8267 70.8245 16.2333 70.8245 15.74C70.8245 15.4467 70.7911 15.2 70.7245 15C70.6711 14.7867 70.6045 14.6 70.5245 14.44C71.5245 13.8133 72.4511 13.5 73.3045 13.5C74.0378 13.5 74.5645 13.72 74.8845 14.16C75.2178 14.5867 75.3845 15.14 75.3845 15.82C75.3845 16.22 75.3045 16.7667 75.1445 17.46C74.9845 18.14 74.7645 18.9133 74.4845 19.78C74.2045 20.6467 73.8778 21.5467 73.5045 22.48C73.1445 23.4 72.7645 24.2933 72.3645 25.16C71.6978 26.5733 71.0178 27.7533 70.3245 28.7C69.6311 29.6467 68.8445 30.3533 67.9645 30.82C67.0978 31.3 66.0511 31.54 64.8245 31.54ZM84.458 28.52C83.5647 28.52 82.9314 28.2667 82.558 27.76C82.198 27.24 82.018 26.46 82.018 25.42C82.018 24.7533 82.1247 23.7533 82.338 22.42C82.5647 21.0733 82.878 19.2933 83.278 17.08L82.218 14.94C82.8447 14.54 83.5114 14.2 84.218 13.92C84.9247 13.6267 85.6314 13.48 86.338 13.48C86.8047 13.48 87.1514 13.5933 87.378 13.82C87.6047 14.0467 87.7514 14.3333 87.818 14.68C88.4314 14.3333 89.0714 14.0533 89.738 13.84C90.418 13.6133 91.1247 13.5 91.858 13.5C92.378 13.5 92.898 13.5867 93.418 13.76C93.9514 13.9333 94.398 14.24 94.758 14.68C95.118 15.1067 95.298 15.72 95.298 16.52C95.298 17.44 95.0314 18.2533 94.498 18.96C93.9647 19.6533 93.1847 20.2133 92.158 20.64C92.7314 20.7333 93.258 20.9133 93.738 21.18C94.2314 21.4467 94.6247 21.8267 94.918 22.32C95.2114 22.8133 95.358 23.4467 95.358 24.22C95.358 24.9133 95.198 25.5267 94.878 26.06C94.5714 26.5933 94.158 27.0467 93.638 27.42C93.1314 27.78 92.5647 28.0467 91.938 28.22C91.3247 28.4067 90.7114 28.5 90.098 28.5C89.3514 28.5 88.7114 28.42 88.178 28.26C87.658 28.1 87.2247 27.9 86.878 27.66C86.0914 28.2333 85.2847 28.52 84.458 28.52ZM87.018 20.44C87.6714 20.3867 88.298 20.26 88.898 20.06C89.5114 19.86 90.0114 19.5667 90.398 19.18C90.798 18.78 90.998 18.2667 90.998 17.64C90.998 16.64 90.478 16.14 89.438 16.14C89.1447 16.14 88.858 16.1667 88.578 16.22C88.298 16.2733 88.0247 16.3467 87.758 16.44C87.678 16.9467 87.5714 17.56 87.438 18.28C87.3047 18.9867 87.1647 19.7067 87.018 20.44ZM88.478 25.7C89.078 25.7 89.6047 25.54 90.058 25.22C90.5114 24.9 90.738 24.4067 90.738 23.74C90.738 23.1 90.5447 22.6467 90.158 22.38C89.7714 22.1 89.3047 21.96 88.758 21.96C88.4247 21.96 88.0714 22 87.698 22.08C87.338 22.1467 86.9914 22.2333 86.658 22.34C86.5647 22.8733 86.4847 23.3467 86.418 23.76C86.3647 24.1733 86.338 24.4933 86.338 24.72V25.24C86.6447 25.3733 86.9847 25.4867 87.358 25.58C87.7314 25.66 88.1047 25.7 88.478 25.7ZM108.195 28.52C107.555 28.52 106.995 28.3333 106.515 27.96C106.035 27.5733 105.795 26.96 105.795 26.12C105.795 26.04 105.795 25.96 105.795 25.88C105.795 25.7867 105.801 25.6933 105.815 25.6L105.615 25.54C104.295 27.5133 102.521 28.5 100.295 28.5C99.1748 28.5 98.3548 28.2 97.8348 27.6C97.3281 27 97.0748 26.1667 97.0748 25.1C97.0748 24.5933 97.1348 23.9067 97.2548 23.04C97.3881 22.16 97.5414 21.2 97.7148 20.16C97.9014 19.12 98.0814 18.0933 98.2548 17.08L97.1948 14.94C97.9281 14.5133 98.6148 14.1667 99.2548 13.9C99.9081 13.6333 100.595 13.5 101.315 13.5C101.941 13.5 102.355 13.68 102.555 14.04C102.755 14.4 102.855 14.84 102.855 15.36C102.855 15.5333 102.821 15.8333 102.755 16.26C102.688 16.6733 102.601 17.1667 102.495 17.74C102.401 18.3133 102.295 18.9133 102.175 19.54C102.068 20.1533 101.961 20.7533 101.855 21.34C101.761 21.9133 101.681 22.42 101.615 22.86C101.548 23.3 101.515 23.62 101.515 23.82C101.515 24.3133 101.595 24.7 101.755 24.98C101.928 25.26 102.208 25.4 102.595 25.4C102.915 25.4 103.281 25.26 103.695 24.98C104.121 24.7 104.548 24.28 104.975 23.72C105.401 23.1467 105.768 22.4333 106.075 21.58C105.795 20.7533 105.655 19.9133 105.655 19.06C105.655 18.0867 105.815 17.18 106.135 16.34C106.468 15.5 106.961 14.82 107.615 14.3C108.268 13.7667 109.081 13.5 110.055 13.5C110.361 13.5 110.675 13.5267 110.995 13.58C111.328 13.6333 111.635 13.7333 111.915 13.88C111.795 14.6 111.655 15.3933 111.495 16.26C111.335 17.1267 111.168 18.0067 110.995 18.9C110.835 19.78 110.681 20.62 110.535 21.42C110.401 22.22 110.288 22.9133 110.195 23.5C110.115 24.0733 110.075 24.48 110.075 24.72C110.075 25.4 110.121 25.9733 110.215 26.44C110.321 26.9067 110.475 27.3 110.675 27.62C109.875 28.22 109.048 28.52 108.195 28.52ZM117.798 28.5C116.944 28.5 116.178 28.36 115.498 28.08C114.831 27.8 114.304 27.3867 113.918 26.84C113.531 26.28 113.338 25.58 113.338 24.74C113.338 24.2333 113.398 23.5733 113.518 22.76C113.651 21.9467 113.811 21.0533 113.998 20.08C114.184 19.0933 114.364 18.0933 114.538 17.08L113.478 14.94C114.224 14.5133 114.938 14.1667 115.618 13.9C116.311 13.6333 117.038 13.5 117.798 13.5C118.118 13.5 118.384 13.5533 118.598 13.66C118.811 13.7667 118.984 13.9133 119.118 14.1C119.691 13.9 120.231 13.7533 120.738 13.66C121.244 13.5667 121.724 13.52 122.178 13.52C123.391 13.52 124.404 13.7933 125.218 14.34C126.031 14.8867 126.638 15.6067 127.038 16.5C127.451 17.3933 127.658 18.3667 127.658 19.42C127.658 20.26 127.524 21.1067 127.258 21.96C127.004 22.8133 126.611 23.6333 126.078 24.42C125.558 25.2067 124.904 25.9067 124.118 26.52C123.331 27.1333 122.411 27.62 121.358 27.98C120.304 28.3267 119.118 28.5 117.798 28.5ZM118.518 25.58C119.531 25.58 120.378 25.3267 121.058 24.82C121.751 24.3133 122.271 23.6467 122.618 22.82C122.964 21.9933 123.138 21.1 123.138 20.14C123.138 18.94 122.864 17.9667 122.318 17.22C121.771 16.46 120.958 16.08 119.878 16.08C119.758 16.08 119.631 16.0867 119.498 16.1C119.364 16.1133 119.224 16.1333 119.078 16.16C118.998 16.6933 118.891 17.36 118.758 18.16C118.638 18.96 118.498 19.8133 118.338 20.72C118.191 21.6133 118.044 22.4867 117.898 23.34C117.764 24.18 117.658 24.9 117.578 25.5C117.738 25.5267 117.898 25.5467 118.058 25.56C118.218 25.5733 118.371 25.58 118.518 25.58ZM133.145 28.5C132.292 28.5 131.525 28.36 130.845 28.08C130.178 27.8 129.652 27.3867 129.265 26.84C128.878 26.28 128.685 25.58 128.685 24.74C128.685 24.2333 128.745 23.5733 128.865 22.76C128.998 21.9467 129.158 21.0533 129.345 20.08C129.532 19.0933 129.712 18.0933 129.885 17.08L128.825 14.94C129.572 14.5133 130.285 14.1667 130.965 13.9C131.658 13.6333 132.385 13.5 133.145 13.5C133.465 13.5 133.732 13.5533 133.945 13.66C134.158 13.7667 134.332 13.9133 134.465 14.1C135.038 13.9 135.578 13.7533 136.085 13.66C136.592 13.5667 137.072 13.52 137.525 13.52C138.738 13.52 139.752 13.7933 140.565 14.34C141.378 14.8867 141.985 15.6067 142.385 16.5C142.798 17.3933 143.005 18.3667 143.005 19.42C143.005 20.26 142.872 21.1067 142.605 21.96C142.352 22.8133 141.958 23.6333 141.425 24.42C140.905 25.2067 140.252 25.9067 139.465 26.52C138.678 27.1333 137.758 27.62 136.705 27.98C135.652 28.3267 134.465 28.5 133.145 28.5ZM133.865 25.58C134.878 25.58 135.725 25.3267 136.405 24.82C137.098 24.3133 137.618 23.6467 137.965 22.82C138.312 21.9933 138.485 21.1 138.485 20.14C138.485 18.94 138.212 17.9667 137.665 17.22C137.118 16.46 136.305 16.08 135.225 16.08C135.105 16.08 134.978 16.0867 134.845 16.1C134.712 16.1133 134.572 16.1333 134.425 16.16C134.345 16.6933 134.238 17.36 134.105 18.16C133.985 18.96 133.845 19.8133 133.685 20.72C133.538 21.6133 133.392 22.4867 133.245 23.34C133.112 24.18 133.005 24.9 132.925 25.5C133.085 25.5267 133.245 25.5467 133.405 25.56C133.565 25.5733 133.718 25.58 133.865 25.58ZM145.912 31.54C145.592 31.54 145.246 31.5067 144.872 31.44C144.499 31.3733 144.146 31.2533 143.812 31.08C143.479 30.9067 143.206 30.6667 142.992 30.36C142.779 30.0533 142.672 29.6533 142.672 29.16C142.672 28.8133 142.752 28.42 142.912 27.98C143.072 27.5267 143.319 27.0733 143.652 26.62C143.959 27.06 144.359 27.3933 144.852 27.62C145.346 27.8467 145.859 27.96 146.392 27.96C147.006 27.96 147.579 27.8067 148.112 27.5C148.659 27.18 149.046 26.7 149.272 26.06C148.859 26.1533 148.532 26.22 148.292 26.26C148.052 26.3 147.779 26.32 147.472 26.32C146.819 26.32 146.299 26.18 145.912 25.9C145.539 25.6067 145.326 25.1067 145.272 24.4C145.232 23.76 145.199 23.0667 145.172 22.32C145.146 21.5733 145.092 20.8133 145.012 20.04C144.946 19.2667 144.826 18.52 144.652 17.8C144.479 17.08 144.232 16.4333 143.912 15.86C143.592 15.2733 143.166 14.8 142.632 14.44C143.166 14.12 143.632 13.8867 144.032 13.74C144.446 13.58 144.879 13.5 145.332 13.5C146.066 13.5 146.672 13.6733 147.152 14.02C147.646 14.3533 148.039 14.8067 148.332 15.38C148.639 15.9533 148.866 16.6 149.012 17.32C149.172 18.04 149.286 18.7867 149.352 19.56C149.419 20.3333 149.459 21.0867 149.472 21.82C149.499 22.5533 149.526 23.22 149.552 23.82H149.832C150.072 23.2467 150.312 22.6 150.552 21.88C150.806 21.16 151.032 20.4267 151.232 19.68C151.432 18.92 151.592 18.2 151.712 17.52C151.846 16.8267 151.912 16.2333 151.912 15.74C151.912 15.4467 151.879 15.2 151.812 15C151.759 14.7867 151.692 14.6 151.612 14.44C152.612 13.8133 153.539 13.5 154.392 13.5C155.126 13.5 155.652 13.72 155.972 14.16C156.306 14.5867 156.472 15.14 156.472 15.82C156.472 16.22 156.392 16.7667 156.232 17.46C156.072 18.14 155.852 18.9133 155.572 19.78C155.292 20.6467 154.966 21.5467 154.592 22.48C154.232 23.4 153.852 24.2933 153.452 25.16C152.786 26.5733 152.106 27.7533 151.412 28.7C150.719 29.6467 149.932 30.3533 149.052 30.82C148.186 31.3 147.139 31.54 145.912 31.54Z"
                fill="#FF70D9"
              />
            </svg>
          </div>

          {error && (
            <div className="mb-4 text-red-500 text-sm text-center">{error}</div>
          )}

          {/* Form */}
          <form onSubmit={handleLogin}>
            <div className="mb-6">
              <label
                htmlFor="username"
                className="block text-gray-700 font-medium mb-2 uppercase text-sm"
              >
                USERNAME
              </label>
              <div className="relative">
                <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    className="h-5 w-5 text-gray-400"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                  >
                    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" />
                    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" />
                  </svg>
                </div>
                <input
                  type="text"
                  id="username"
                  className="border border-gray-200 rounded-md w-full py-3 pl-10 pr-3 text-gray-600 placeholder-gray-400 focus:outline-none focus:border-pink-300"
                  placeholder="Username or email"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                />
              </div>
            </div>

            <div className="mb-4">
              <label
                htmlFor="password"
                className="block text-gray-700 font-medium mb-2 uppercase text-sm"
              >
                PASSWORD
              </label>
              <div className="relative">
                <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    className="h-5 w-5 text-gray-400"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                  >
                    <path
                      fillRule="evenodd"
                      d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z"
                      clipRule="evenodd"
                    />
                  </svg>
                </div>
                <input
                  type={showPassword ? "text" : "password"}
                  id="password"
                  className="border border-gray-200 rounded-md w-full py-3 pl-10 pr-10 text-gray-600 placeholder-gray-400 focus:outline-none focus:border-pink-300"
                  placeholder="Password"
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                />
                <div
                  className="absolute inset-y-0 right-0 pr-3 flex items-center"
                  onClick={togglePasswordVisibility}
                >
                  {showPassword ? (
                    <i className="fa-solid fa-eye text-gray-400"></i>
                  ) : (
                    <i className="fa-solid fa-eye-slash text-gray-400"></i>
                  )}
                </div>
              </div>
            </div>

            <div className="flex justify-end mb-6">
              <button
                className="text-sm text-[#FF70D9] hover:text-opacity-80"
                onClick={() => setShowForgotPassword(true)}
                type="button"
              >
                Forgot password?
              </button>
            </div>

            <button
              className="bg-[#FF70D9] hover:bg-opacity-80 text-white font-medium py-3 px-4 rounded-md w-full transition duration-200"
              type="submit"
            >
              Login
            </button>
          </form>
        </motion.div>
      </motion.div>

      {showForgotPassword && (
        <ForgotPasswordModals onClose={() => setShowForgotPassword(false)} />
      )}
    </>
  );
};

export default LoginModal;
